angular.module("beehrm",["ionic","ionic.service.core","ngCordova","ngStorage","ngFx","ngAnimate","ionic-datepicker","beehrm.directives","beehrm.services","beehrm.factories","beehrm.controllers"]).constant("urls",{BASE_API:"http://youngminds.com.np/beehrm_mobile/"}).run(["$ionicPlatform","$cordovaDialogs","$state","$localStorage",function(e,t,o,n){e.ready(function(){var e=new Ionic.Push({onNotification:function(e){var n=e._payload.$state,a=e._payload.$stateParams;return"undefined"!=typeof n?(t.confirm(e.text,e.title,["OK","Cancel"]).then(function(e){1==e&&("undefined"!=typeof a?o.go(n,a):o.go(n))}),!0):void 0},onRegister:function(e){n.deviceToken=e},pluginConfig:{android:{iconColor:"#F8C300",badge:!0,icon:"icon"}}}),a=function(e){};e.register(a),window.plugins&&(window.plugins.nativepagetransitions.globalOptions.duration=400,window.plugins.nativepagetransitions.globalOptions.iosdelay=250,window.plugins.nativepagetransitions.globalOptions.androiddelay=250,window.plugins.nativepagetransitions.globalOptions.winphonedelay=250,window.plugins.nativepagetransitions.globalOptions.slowdownfactor=4,window.plugins.nativepagetransitions.globalOptions.fixedPixelsTop=0,window.plugins.nativepagetransitions.globalOptions.fixedPixelsBottom=0),window.cordova&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar&&StatusBar.backgroundColorByHexString("#445963")})}]).config(["$stateProvider","$urlRouterProvider","$ionicConfigProvider","$httpProvider",function(e,t,o,n){e.state("app",{url:"/app","abstract":!0,templateUrl:"templates/dist/menu.html",controller:"AppCtrl"}).state("app.access",{url:"/access",views:{menuContent:{templateUrl:"templates/dist/access.html"}}}).state("app.login",{url:"/login",views:{menuContent:{templateUrl:"templates/dist/login.html",controller:"LoginCtrl"}}}).state("app.events",{url:"/events",views:{menuContent:{templateUrl:"templates/dist/events.html",controller:"EventsCtrl"}}}).state("app.notifications",{url:"/notifications",views:{menuContent:{templateUrl:"templates/dist/notifications.html",controller:"NotificationsCtrl"}}}).state("app.leaves",{url:"/leaves",views:{menuContent:{templateUrl:"templates/dist/leaves.html",controller:"LeavesCtrl"}}}).state("app.leavesBalance",{url:"/leaves-balance",views:{menuContent:{templateUrl:"templates/dist/leaves.balance.html",controller:"LeavesBalanceCtrl"}}}).state("app.leave",{url:"/leaves/:leaveId",views:{menuContent:{templateUrl:"templates/dist/leave.html",controller:"LeaveCtrl"}}}).state("app.bulletinBoard",{url:"/bulletinBoards/:bulletinId",views:{menuContent:{templateUrl:"templates/dist/bulletin.html",controller:"BulletinBoardCtrl"}}}).state("app.payslips",{url:"/payslips",views:{menuContent:{templateUrl:"templates/dist/payslips.html",controller:"PayslipsCtrl"}}}).state("app.payslip",{url:"/payslips/:slipId",views:{menuContent:{templateUrl:"templates/dist/payslip.html",controller:"PayslipCtrl"}}}).state("app.dashboard",{url:"/dashboard",views:{menuContent:{templateUrl:"templates/dist/dashboard.html",controller:"DashboardCtrl"}}}),t.otherwise("/app/access"),o.tabs.position("bottom"),o.navBar.alignTitle("center"),o.views.transition("platform"),o.scrolling.jsScrolling("false"),o.views.transition("none"),n.interceptors.push(["$q","$location","$localStorage",function(e,t,o){return{request:function(e){return e.headers=e.headers||{},o.token&&(e.headers.Authorization="Bearer "+o.token),e},responseError:function(o){return 401===o.status?t.path("/app/login"):403===o.status&&t.path("/app/access"),e.reject(o)}}}])}]),angular.module("beehrm.services",[]).service("Navigation",["$state","$ionicPlatform",function(e,t){this.goNative=function(e,o){t.ready(function(){switch(o){case"slide":window.plugins.nativepagetransitions.slide({direction:e},function(e){},function(e){});break;case"flip":window.plugins.nativepagetransitions.flip({direction:e},function(e){},function(e){});break;case"fade":window.plugins.nativepagetransitions.fade({},function(e){},function(e){});break;case"drawer":window.plugins.nativepagetransitions.drawer({origin:e,action:"open"},function(e){},function(e){});break;case"curl":window.plugins.nativepagetransitions.curl({direction:e},function(e){},function(e){});break;default:window.plugins.nativepagetransitions.slide({direction:e},function(e){},function(e){})}})}}]),angular.module("beehrm.factories",[]).factory("Auth",["$http","$localStorage","urls",function(e,t,o){return{access:function(t){return e({url:o.BASE_API,method:"POST",dataType:"json",data:t,headers:{"Content-Type":"application/json"}})},login:function(o){return e({url:t.accessData.org_app_url+"/login",method:"POST",dataType:"json",data:o,headers:{"Content-Type":"application/x.vdn.v1+json"}})},deviceToken:function(o){return e({url:t.accessData.org_app_url+"/store-device-token",method:"POST",dataType:"json",data:o,headers:{"Content-Type":"application/x.vdn.v1+json"}})},logout:function(o){return e({url:t.accessData.org_app_url+"/delete-device-token",method:"GET",dataType:"json",headers:{"Content-Type":"application/x.vdn.v1+json",Authorization:"bearer "+t.token}}),e({url:t.accessData.org_app_url+"/logout",method:"GET",dataType:"json",headers:{"Content-Type":"application/x.vdn.v1+json",Authorization:"bearer "+t.token}})}}}]).factory("Me",["$http","$localStorage","urls",function(e,t,o){return{basic:function(o){return e({url:t.accessData.org_app_url+"/me",method:"GET",dataType:"json",headers:{"Content-Type":"application/x.vdn.v1+json",Authorization:"bearer "+t.token}})},include:function(o){var n="";return angular.forEach(o,function(e,t){n+=e+","}),included=n.substring(0,n.length-1),n="undefined"==typeof included?"":included,e({url:t.accessData.org_app_url+"/me?include="+n,method:"GET",dataType:"json",headers:{"Content-Type":"application/x.vdn.v1+json",Authorization:"bearer "+t.token}})}}}]).factory("All",["$http","$localStorage","urls",function(e,t,o){return{leaveApplication:function(o){var n="undefined"==typeof o[0]?"":o[0];return e({url:t.accessData.org_app_url+"/leave-application/?"+n,method:"GET",dataType:"json",headers:{"Content-Type":"application/x.vdn.v1+json",Authorization:"bearer "+t.token}})},getLeaveTypes:function(o){return e({url:t.accessData.org_app_url+"/leave-application/get-leave-types",method:"GET",dataType:"json",headers:{"Content-Type":"application/x.vdn.v1+json",Authorization:"bearer "+t.token}})},leaveBalance:function(o){return e({url:t.accessData.org_app_url+"/leave-balance",method:"GET",dataType:"json",headers:{"Content-Type":"application/x.vdn.v1+json",Authorization:"bearer "+t.token}})},bulletinBoard:function(o){return e({url:t.accessData.org_app_url+"/bulletin-board",method:"GET",dataType:"json",headers:{"Content-Type":"application/x.vdn.v1+json",Authorization:"bearer "+t.token}})},events:function(o){return e({url:t.accessData.org_app_url+"/events",method:"GET",dataType:"json",headers:{"Content-Type":"application/x.vdn.v1+json",Authorization:"bearer "+t.token}})},submitLeaveApplication:function(o){return e({url:t.accessData.org_app_url+"/leave-application",method:"POST",dataType:"json",data:o,headers:{"Content-Type":"application/x.vdn.v1+json"}})},checkLeaveApplication:function(o){var n="undefined"==typeof o[0]?"":o[0];return e({url:t.accessData.org_app_url+"/events?"+n,method:"GET",dataType:"json",data:o,headers:{"Content-Type":"application/x.vdn.v1+json",Authorization:"bearer "+t.token}})}}}]),angular.module("beehrm.directives",[]).directive("goNative",["Navigation",function(e){return{restrict:"A",link:function(t,o,n){var a=n.direction,i=n.transitiontype;t.$on("$stateChangeStart",function(){e.goNative(a,i)})}}}]).directive("showFooter",["$rootScope",function(e){return{restrict:"A",link:function(t,o){e.showFooter||(t.$on("$ionicView.beforeEnter",function(){e.showFooter=!0}),t.$on("$stateChangeStart",function(){e.showFooter=!1}))}}}]).directive("showTabs",["$rootScope",function(e){return{restrict:"A",link:function(t,o){e.showTabs||(t.$on("$ionicView.beforeEnter",function(){e.showTabs=!0}),t.$on("$stateChangeStart",function(){e.showTabs=!1}))}}}]).directive("showLeaveFooter",["$rootScope",function(e){return{restrict:"A",link:function(t,o){e.showLeaveFooter||(t.$on("$ionicView.beforeEnter",function(){e.showLeaveFooter=!0}),t.$on("$stateChangeStart",function(){e.showLeaveFooter=!1}))}}}]).directive("showLeaveTabs",["$rootScope",function(e){return{restrict:"A",link:function(t,o){e.showLeaveTabs||(t.$on("$ionicView.beforeEnter",function(){e.showLeaveTabs=!0}),t.$on("$stateChangeStart",function(){e.showLeaveTabs=!1}))}}}]),angular.module("beehrm.controllers",[]).controller("AppCtrl",["$scope","$rootScope","$state","$timeout","$localStorage","$ionicSideMenuDelegate","$ionicLoading","$ionicHistory","$cordovaDialogs","$cordovaNetwork","Auth",function(e,t,o,n,a,i,l,r,s,c,d){l.show({template:"Loading..."}),e.$on("$ionicView.enter",function(){i.canDragContent(!1)}),e.$on("$ionicView.leave",function(){i.canDragContent(!0)}),e.isOnline=!1,document.addEventListener("deviceready",function(){e.isOnline=c.isOnline(),t.$on("$cordovaNetwork:online",function(t,o){e.isOnline=!0}),t.$on("$cordovaNetwork:offline",function(t,o){e.isOnline=!1}),"undefined"!=typeof a.userInfo?(t.userInfo=a.userInfo,t.userInfo.image="data:image/png;base64,"===a.userInfo.image?"img/profile_avatar.png":a.userInfo.image,"undefined"==typeof a.deviceTokenRegistered?d.deviceToken({deviceToken:a.deviceToken._token}).success(function(e){a.deviceTokenRegistered=!0,o.go("app.dashboard",{},{reload:!0})}).error(function(e){n(function(){l.hide(),s.alert(e.message,"Whoops","OK")},1e3)}):o.go("app.dashboard",{},{reload:!0})):"undefined"!=typeof a.accessData?o.go("app.login",{},{reload:!0}):e.accessShow=!0,n(function(){l.hide()},1e3),e.accessData={},e.access=function(){e.isOnline?(l.show({template:"Loading..."}),d.access({org_key:e.accessData.orgKey}).success(function(t){e.accessShow=!1,a.accessData=t,l.hide(),o.go("app.login")}).error(function(e){n(function(){l.hide(),s.alert(e.message,"Whoops","OK")},1e3)})):s.alert("Please check your internet connection","Whoops","OK")},e.logout=function(){s.confirm("Wanna LogOut?","BeeHRM",["Yes","Cancel"]).then(function(t){1==t&&(l.show({template:"Loading..."}),d.logout({}).success(function(t){delete a.token,delete a.userInfo,delete a.notifications,delete a.payslip,delete a.bulletinBoard,delete a.deviceTokenRegistered,r.clearCache(),r.clearHistory(),e.loginShow=!0,o.go("app.login",{},{reload:!0}),l.hide()}).error(function(e){n(function(){l.hide(),s.alert(e.message,"Whoops","OK")},1e3)}))})}},!1)}]).controller("LoginCtrl",["$scope","$rootScope","$state","$timeout","$localStorage","$ionicLoading","$cordovaDialogs","$cordovaNetwork","Auth","Me","All",function(e,t,o,n,a,i,l,r,s,c,d){i.show({template:"Loading..."}),e.isOnline=!1,document.addEventListener("deviceready",function(){function p(){s.deviceToken({deviceToken:a.deviceToken._token}).success(function(e){a.deviceTokenRegistered=!0}).error(function(e){n(function(){i.hide(),l.alert(e.message,"Whoops","OK")},1e3)})}function u(){c.include({0:"applications",1:"payslip"}).success(function(t){a.notifications=t.data.notifications,delete t.data.notifications,a.userInfo=t.data,e.userInfo=a.userInfo,f()}).error(function(e){n(function(){i.hide(),l.alert(e.message,"Whoops","OK")},1e3)})}function f(){d.bulletinBoard({}).success(function(e){a.bulletinBoard=e.data,o.go("app.dashboard"),i.hide()}).error(function(e){n(function(){i.hide(),l.alert(e.message,"Whoops","OK")},1e3)})}e.isOnline=r.isOnline(),t.$on("$cordovaNetwork:online",function(t,o){e.isOnline=!0,"undefined"!=typeof a.token&&(i.show({template:"Please wait..."}),f())}),t.$on("$cordovaNetwork:offline",function(t,o){e.isOnline=!1}),n(function(){"undefined"!=typeof a.token?(e.userInfo=a.userInfo,e.isOnline?f():o.go("app.dashboard")):e.loginShow=!0,i.hide()},1e3),e.loginData={},e.login=function(){e.isOnline?(i.show({template:"Loading..."}),s.login({email:e.loginData.email,password:e.loginData.password}).success(function(t){e.loginShow=!1,a.token=t.token,"undefined"!=typeof a.deviceToken._token&&p(),u()}).error(function(e){n(function(){i.hide(),l.alert(e.message,"Whoops","OK")},1e3)})):l.alert("Please check your internet connection","Whoops","OK")}},!1)}]).controller("DashboardCtrl",["$scope","$rootScope","$timeout","$localStorage","$ionicLoading","$cordovaDialogs","$cordovaNetwork","All","Me",function(e,t,o,n,a,i,l,r,s){function c(){"undefined"!=typeof n.accessData&&(a.show({template:"Loading..."}),r.bulletinBoard({}).success(function(e){n.bulletinBoard=e.data,t.bulletinBoard=e.data,a.hide()}).error(function(e){o(function(){a.hide(),i.alert(e.message,"Whoops","OK")},1e3)}))}e.isOffline=!0,document.addEventListener("deviceready",function(){e.isOffline=l.isOffline(),t.$on("$cordovaNetwork:online",function(t,o){e.isOffline=!1,"undefined"!=typeof n.token&&(a.show({template:"Syncing data..."}),c())}),t.$on("$cordovaNetwork:offline",function(t,o){e.isOffline=!0}),"undefined"!=typeof n.userInfo&&(e.isOffline?t.bulletinBoard=n.bulletinBoard:("undefined"==typeof n.userInfo?s.include({0:"applications",1:"payslip"}).success(function(e){n.notifications=e.data.notifications,delete e.data.notifications,n.userInfo=e.data,t.userInfo=n.userInfo,t.userInfo.image="data:image/png;base64,"===n.userInfo.image?"img/profile_avatar.png":n.userInfo.image}).error(function(e){o(function(){a.hide(),i.alert(e.message,"Whoops","OK")},1e3)}):(t.userInfo=n.userInfo,t.userInfo.image="data:image/png;base64,"===n.userInfo.image?"img/profile_avatar.png":n.userInfo.image),c()))},!1),e.checkIn=function(){i.alert("This section will be activated soon","Sorry :(","OK")}}]).controller("NotificationsCtrl",["$scope","$state","$localStorage","Me",function(e,t,o,n){e.notifications=o.notifications.data,e.doRefresh=function(){n.include({}).success(function(t){delete o.notifications,o.notifications=t.data.notifications,e.notifications=t.data.notifications.data,e.$broadcast("scroll.refreshComplete")}).error(function(e){$timeout(function(){$ionicLoading.hide(),$cordovaDialogs.alert(e.message,"Whoops","OK").then(function(){401==e.status_code&&(delete o.token,t.go("app.login"))})},1e3)})}}]).controller("EventsCtrl",["$scope","$timeout","$localStorage","$ionicLoading",function(e,t,o,n){t(function(){"undefined"!=typeof o.events?e.events=o.events:(n.hide(),$state.go("app.dashboard")),n.hide()},1e3)}]).controller("CheckEventCtrl",["$scope","$rootScope","$ionicModal","$timeout","$cordovaNetwork","$cordovaDialogs","$localStorage","$ionicLoading","$filter","$state","All",function(e,t,o,n,a,i,l,r,s,c,d){document.addEventListener("deviceready",function(){e.isOffline=a.isOffline(),t.$on("$cordovaNetwork:online",function(t,o){e.isOffline=!1}),t.$on("$cordovaNetwork:offline",function(t,o){e.isOffline=!0}),e.checkEventData={},o.fromTemplateUrl("templates/dist/events.check.html",{scope:e}).then(function(t){e.modal=t}),e.closeCheckEvent=function(){e.modal.hide()},e.openCheckEvent=function(){e.modal.show()},e.checkEvents=function(){e.isOffline===!1?(r.show({template:"Loading..."}),d.checkLeaveApplication({0:"from="+e.checkEventData.startDate+"&to="+e.checkEventData.endDate}).success(function(t){n(function(){r.hide(),0===t.data.length?i.alert("No events found in given dates","BeeHRM","OK").then(function(){e.checkEventData={startDate:e.checkEventData.startDate,endDate:e.checkEventData.startDate}}):(r.show({template:"Loading..."}),l.events=t.data,e.modal.hide(),c.go("app.events"))},50)}).error(function(e){n(function(){r.hide(),i.alert(e.message,"Whoops","OK")},1e3)})):i.alert("Please check your internet connection","Whoops","OK").then(function(){c.go("app.dashboard")})},e.startDatepickerObject={titleLabel:"Select Date",todayLabel:"Today",closeLabel:"Close",setLabel:"Set",setButtonType:"button-accent button-outline",todayButtonType:"button-accent button-outline",closeButtonType:"button-accent button-outline",mondayFirst:!0,templateType:"popup",modalHeaderColor:"bar-primary",modalFooterColor:"bar-primary",callback:function(e){p(e)}},e.startDate=new Date,e.checkEventData.startDate=s("date")(e.startDate,"yyyy-MM-dd","+0545");var p=function(t){"undefined"==typeof t||(e.startDate=t,e.checkEventData.startDate=s("date")(e.startDate,"yyyy-MM-dd","+0545"))};e.endDatepickerObject={titleLabel:"Select Date",todayLabel:"Today",closeLabel:"Close",setLabel:"Set",setButtonType:"button-accent button-outline",todayButtonType:"button-accent button-outline",closeButtonType:"button-accent button-outline",mondayFirst:!0,templateType:"popup",modalHeaderColor:"bar-primary",modalFooterColor:"bar-primary",callback:function(e){u(e)}},e.endDate=new Date,e.checkEventData.endDate=s("date")(e.endDate,"yyyy-MM-dd","+0545");var u=function(t){"undefined"==typeof t||(e.endDate=t,e.checkEventData.endDate=s("date")(e.endDate,"yyyy-MM-dd","+0545"))}},!1)}]).controller("LeavesCtrl",["$scope","$rootScope","$state","$localStorage","$timeout","$cordovaNetwork","$ionicLoading","$cordovaDialogs","All",function(e,t,o,n,a,i,l,r,s){function c(){s.leaveApplication({}).success(function(o){delete n.userInfo.applications,n.userInfo.applications=o,t.applications=n.userInfo.applications.data,e.total_pages=o.meta.pagination.total_pages,e.current_page=o.meta.pagination.current_page,e.leavesShow=!0,l.hide(),a(function(){e.total_pages!=e.current_page&&(e.moreDataCanBeLoaded=function(){return!0})},1e3)}).error(function(e){a(function(){l.hide(),r.alert(e.message,"Whoops","OK").then(function(){401==e.status_code&&(delete n.token,o.go("app.login"))})},1e3)}),e.loadMore=function(){var i=parseInt(e.current_page)+1;s.leaveApplication({0:"page="+i}).success(function(o){a(function(){e.total_pages=o.meta.pagination.total_pages,e.current_page=o.meta.pagination.current_page,e.total_pages==e.current_page&&(e.moreDataCanBeLoaded=function(){return!1}),t.applications=t.applications.concat(o.data),e.$broadcast("scroll.infiniteScrollComplete")},1e3)}).error(function(e){a(function(){l.hide(),r.alert(e.message,"Whoops","OK").then(function(){401==e.status_code&&(delete n.token,o.go("app.login"))})},1e3)})}}e.leavesShow=!1,l.show({template:"Loading..."}),e.moreDataCanBeLoaded=function(){return!1},e.isOffline=i.isOffline(),t.$on("$cordovaNetwork:online",function(t,o){e.isOffline=!1,l.show({template:"Syncing data..."}),c()}),t.$on("$cordovaNetwork:offline",function(t,o){e.isOffline=!0}),e.isOffline?a(function(){t.applications=n.userInfo.applications.data,e.leavesShow=!0,l.hide()},1e3):c()}]).controller("LeaveCtrl",["$scope","$rootScope","$state","$ionicLoading","$timeout","$localStorage","$stateParams","$filter","$cordovaDialogs",function(e,t,o,n,a,i,l,r,s){function c(e){var o=r("filter")(t.applications,{id:e});return o.length?o[0]:"NOTFOUND"}e.leaveShow=!1,n.show({template:"Loading..."});var d=l.leaveId,p=c(d);a(function(){n.hide(),"NOTFOUND"==p?s.alert("Something went wrong","Whoops","OK").then(function(){o.go("app.leaves")}):(e.leaveDetails=p,e.leaveDetails.approver_photo="data:image/png;base64,"===e.leaveDetails.approver_photo?"img/avatar.jpg":e.leaveDetails.approver_photo,e.leaveShow=!0)},1e3)}]).controller("LeavesBalanceCtrl",["$scope","$rootScope","$timeout","$localStorage","$ionicLoading","$cordovaDialogs","$cordovaNetwork","All","Me",function(e,t,o,n,a,i,l,r,s){function c(){"undefined"!=typeof n.accessData&&(a.show({template:"Loading..."}),r.leaveBalance({}).success(function(t){n.leaveBalance=t.data,e.leaveBalance=t.data,a.hide()}).error(function(e){o(function(){a.hide(),i.alert(e.message,"Whoops","OK")},1e3)}))}e.isOffline=!0,document.addEventListener("deviceready",function(){e.isOffline=l.isOffline(),t.$on("$cordovaNetwork:online",function(t,o){e.isOffline=!1,"undefined"!=typeof n.token&&(a.show({template:"Syncing data..."}),c())}),t.$on("$cordovaNetwork:offline",function(t,o){e.isOffline=!0}),"undefined"!=typeof n.token&&(e.isOffline?e.leaveBalance=n.leaveBalance:c())},!1)}]).controller("BulletinBoardCtrl",["$scope","$rootScope","$state","$ionicLoading","$timeout","$localStorage","$stateParams","$filter","$cordovaDialogs",function(e,t,o,n,a,i,l,r,s){function c(e){var o=r("filter")(t.bulletinBoard,{id:e});return o.length?o[0]:"NOTFOUND"}e.bulletinShow=!1,n.show({template:"Loading..."});var d=l.bulletinId,p=c(d);a(function(){n.hide(),"NOTFOUND"==p?s.alert("Something went wrong","Whoops","OK").then(function(){o.go("app.dashboard")}):(e.bulletinDetails=p,e.bulletinShow=!0)},1e3)}]).controller("ApplyLeaveCtrl",["$scope","$rootScope","$ionicModal","$timeout","$localStorage","$cordovaNetwork","$cordovaDialogs","$ionicLoading","$filter","All",function(e,t,o,n,a,i,l,r,s,c){function d(t){e.halfTypeOptions=[{name:"First Half",id:"F"},{name:"Second Half",id:"S"}],e.leaveData={leaveType:t[0],halfType:e.halfTypeOptions[0],subject:"",description:""},e.leaveData.leave_days_type="F",e.leaveDaysTypeChange=function(){e.leaveData.leaveDaysType.checked===!0?(e.endDateHide=!0,e.whichHalfShow=!0,e.leaveData.leave_days_type="P"):(e.endDateHide=!1,e.whichHalfShow=!1,e.leaveData.leave_days_type="F")},o.fromTemplateUrl("templates/dist/leave.apply.html",{scope:e}).then(function(t){e.modal=t}),e.closeLeave=function(){e.modal.hide()},e.applyLeave=function(){e.modal.show()},e.doLeave=function(){0===e.leaveData.subject.length?l.alert("Subject field is required","Whoops","OK"):0===e.leaveData.description.length?l.alert("Description field is required","Whoops","OK"):l.confirm("Wanna submit?","BeeHRM",["Yes","Cancel"]).then(function(o){1==o&&(r.show({template:"Loading..."}),e.isOffline===!1?c.submitLeaveApplication({leave_days_type:e.leaveData.leave_days_type,subject:e.leaveData.subject,leave_type:e.leaveData.leaveType.leavetype_id,leave_days_part:e.leaveData.halfType.id,startdt:e.leaveData.startDate,enddt:e.leaveData.endDate,desc:e.leaveData.description}).success(function(o){n(function(){r.hide(),l.alert(o,"Success","OK").then(function(){e.leaveData.leave_days_type="F",e.leaveData={leaveType:t[0],halfType:e.halfTypeOptions[0],subject:"",description:"",startDate:e.leaveData.startDate,endDate:e.leaveData.startDate},e.modal.hide()})},50)}).error(function(e){n(function(){r.hide(),l.alert(e.message,"Whoops","OK")},1e3)}):l.alert("Please check your internet connection","Whoops","OK"))})},e.startDatepickerObject={titleLabel:"Select Date",todayLabel:"Today",closeLabel:"Close",setLabel:"Set",setButtonType:"button-accent button-outline",todayButtonType:"button-accent button-outline",closeButtonType:"button-accent button-outline",mondayFirst:!0,templateType:"popup",modalHeaderColor:"bar-primary",modalFooterColor:"bar-primary",callback:function(e){a(e)}},e.startDate=new Date,e.leaveData.startDate=s("date")(e.startDate,"yyyy-MM-dd","+0545");var a=function(t){"undefined"==typeof t||(e.startDate=t,e.leaveData.startDate=s("date")(e.startDate,"yyyy-MM-dd","+0545"))};e.endDatepickerObject={titleLabel:"Select Date",todayLabel:"Today",closeLabel:"Close",setLabel:"Set",setButtonType:"button-accent button-outline",todayButtonType:"button-accent button-outline",closeButtonType:"button-accent button-outline",mondayFirst:!0,templateType:"popup",modalHeaderColor:"bar-primary",modalFooterColor:"bar-primary",callback:function(e){i(e)}},e.endDate=new Date,e.leaveData.endDate=s("date")(e.endDate,"yyyy-MM-dd","+0545");var i=function(t){"undefined"==typeof t||(e.endDate=t,e.leaveData.endDate=s("date")(e.endDate,"yyyy-MM-dd","+0545"))}}document.addEventListener("deviceready",function(){e.isOffline=i.isOffline(),t.$on("$cordovaNetwork:online",function(t,o){e.isOffline=!1}),t.$on("$cordovaNetwork:offline",function(t,o){e.isOffline=!0}),e.leaveDaysType={checked:!1},e.endDateHide=!1,e.whichHalfShow=!1,e.expandText=function(){var e=document.getElementById("txtnotes");e.style.height=e.scrollHeight+"px"},e.isOffline&&"undefined"!=typeof a.leaveTypeOptions?(e.leaveTypeOptions=a.leaveTypeOptions,d(e.leaveTypeOptions)):(r.show({template:"Loading..."}),c.getLeaveTypes({}).success(function(t){a.leaveTypeOptions=t,e.leaveTypeOptions=t,e.leaveTypeOptions.length>0?d(e.leaveTypeOptions):l.alert("You cannot apply leave right now. Please contact app developers","Whoops","OK"),r.hide()}).error(function(t){"undefined"!=typeof a.leaveTypeOptions?(e.leaveTypeOptions=a.leaveTypeOptions,d(e.leaveTypeOptions)):n(function(){r.hide(),l.alert("Something went wrong","Whoops","OK")},100)}))},!1)}]).controller("PayslipsCtrl",["$scope","$rootScope","$state","$ionicLoading","$timeout","$localStorage","$cordovaNetwork","$cordovaDialogs","Me",function(e,t,o,n,a,i,l,r,s){function c(){s.include({0:"payslip"}).success(function(o){i.payslip=o.data.payslip.data,t.payslip=i.payslip,e.payslipsShow=!0,n.hide()}).error(function(e){a(function(){n.hide(),r.alert(e.message,"Whoops","OK").then(function(){401==e.status_code&&(delete i.token,o.go("app.login"))})},1e3)})}e.payslipsShow=!1,n.show({template:"Loading..."}),t.$on("$cordovaNetwork:online",function(e,t){n.show({template:"Syncing data..."}),c()});var d=l.isOffline();d?a(function(){t.payslip=i.payslip,e.payslipsShow=!0,n.hide()},1e3):c()}]).controller("PayslipCtrl",["$scope","$rootScope","$state","$ionicLoading","$timeout","$localStorage","$stateParams","$filter","$cordovaDialogs",function(e,t,o,n,a,i,l,r,s){function c(e){var o=r("filter")(t.payslip,{id:e});return o.length?o[0]:"NOTFOUND"}e.payslipShow=!1,n.show({template:"Loading..."});var d=l.slipId,p=c(d);a(function(){n.hide(),"NOTFOUND"==p?s.alert("Something went wrong","Whoops","OK").then(function(){o.go("app.payslips")}):(e.payslipDetails=p,e.payslipShow=!0)},1e3)}]);